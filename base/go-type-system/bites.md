# Go语言二进制位运算详解文档

## 概述

本文档详细讲解Go语言中的二进制表示、位运算基础以及如何在Go中处理二进制数据。通过这份代码示例，我们将理解计算机如何使用二进制位来存储和表示数字。

## 1. 二进制基础

### 1.1 什么是二进制？

二进制是计算机使用的数字系统，只包含0和1两个数字。每个0或1称为一个"位"(bit)，是计算机中最小的信息单位。

### 1.2 位的状态编码能力

- **1位**：可以表示2种状态（0或1）
  - 例如：开/关、真/假、是/否
  
- **2位**：可以表示4种状态（2²=4）
  ```
  00 = 0
  01 = 1
  10 = 2
  11 = 3
  ```

- **8位**（1字节）：可以表示256种状态（2⁸=256）
  - 范围：0到255

## 2. Go语言中的二进制格式化输出

### 2.1 使用 `%b` 格式化动词

`%b` 用于将整数以二进制形式打印：

```go
fmt.Printf("%b\n", 5)  // 输出: 101
```

### 2.2 指定位宽和前导零

使用 `%0Nb` 格式，其中N是位数：

```go
fmt.Printf("%02b\n", 1)  // 输出: 01 (2位，前导零填充)
fmt.Printf("%08b\n", 5)  // 输出: 00000101 (8位，前导零填充)
```

## 3. 二进制到十进制的转换原理

### 3.1 位权值计算法

每一位的值等于：**该位的值(0或1) × 2的位置次方**

位置从右到左，从0开始计数：

```
位置:    7  6  5  4  3  2  1  0
权值:  128 64 32 16  8  4  2  1
       (2⁷)(2⁶)(2⁵)(2⁴)(2³)(2²)(2¹)(2⁰)
```

### 3.2 转换示例

#### 示例1：二进制 `00000010` = 十进制 2

```
位:      0  0  0  0  0  0  1  0
位置:    7  6  5  4  3  2  1  0
计算:    0  0  0  0  0  0  2  0
                              ----
                        总和 = 2
```

详细计算：
- 2⁰ × 0 = 0
- 2¹ × 1 = 2 ✓
- 2² × 0 = 0
- ...其余都是0
- **总和 = 2**

#### 示例2：二进制 `00010110` = 十进制 22

```
位:      0  0  0  1  0  1  1  0
位置:    7  6  5  4  3  2  1  0
计算:    0  0  0 16  0  4  2  0
                              -----
                       总和 = 22
```

详细计算：
- 2¹ × 1 = 2
- 2² × 1 = 4
- 2⁴ × 1 = 16
- **总和 = 2 + 4 + 16 = 22**

## 4. Go语言中的二进制解析

### 4.1 使用 `strconv.ParseInt`

`strconv.ParseInt` 函数可以将字符串形式的二进制数转换为整数：

```go
i, err := strconv.ParseInt("00000010", 2, 64)
// 参数说明：
// "00000010" - 要转换的字符串
// 2          - 基数（2表示二进制）
// 64         - 结果的位大小
```

### 4.2 函数参数说明

- **第一个参数**：待解析的字符串
- **第二个参数**：进制基数（2=二进制，10=十进制，16=十六进制）
- **第三个参数**：整数类型的位大小（0, 8, 16, 32, 64）

## 5. 2的幂次方规律

观察代码中的输出，我们可以看到一个重要规律：

```go
00000001 = 1   (2⁰)
00000010 = 2   (2¹)
00000100 = 4   (2²)
00001000 = 8   (2³)
00010000 = 16  (2⁴)
00100000 = 32  (2⁵)
01000000 = 64  (2⁶)
10000000 = 128 (2⁷)
```

**规律**：每次左移一位，数值翻倍（乘以2）

## 6. 实用技巧

### 6.1 快速判断2的幂

如果一个数的二进制表示中只有一个1，那么它就是2的幂：
- 8 = `00001000` ✓（是2³）
- 10 = `00001010` ✗（不是2的幂）

### 6.2 二进制加法

相同位相加规则：
```
0 + 0 = 0
0 + 1 = 1
1 + 0 = 1
1 + 1 = 10 (需要进位)
```

## 7. 实践练习

### 练习1：转换二进制到十进制

尝试手动计算以下二进制数的十进制值：
1. `11111111` = ?
2. `10101010` = ?
3. `01010101` = ?

### 练习2：转换十进制到二进制

使用Go代码将以下十进制数转换为二进制：
1. 15
2. 100
3. 255

### 示例代码：

```go
fmt.Printf("%08b = %d\n", 15, 15)   // 00001111 = 15
fmt.Printf("%08b = %d\n", 100, 100) // 01100100 = 100
fmt.Printf("%08b = %d\n", 255, 255) // 11111111 = 255
```

## 8. 总结

- 二进制是计算机的基础数字系统
- N位二进制可以表示2^N种不同的状态
- Go提供了丰富的格式化和解析函数处理二进制数据
- 理解位权值是掌握二进制转换的关键
- 二进制在位运算、权限管理、网络协议等领域有广泛应用

## 9. 扩展阅读

- Go官方文档：`fmt`包和`strconv`包
- 位运算符：`&`（与）、`|`（或）、`^`（异或）、`<<`（左移）、`>>`（右移）
- 实际应用：文件权限（Unix）、网络掩码、标志位管理